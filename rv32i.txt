RV32I
=========================

opcode = instruction[6:0]
funct3 = instruction[14:12]
funct7 = instruction[31:25]



                       31   30       20   19       12        11       10        5   4         1        0
                        |   |         |   |         |        |        |         |   |         |        |
                        |   |         |   |         |        |        |         |   |         |        |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+
I-immediate |                                              inst[31] | inst[30:25] | inst[24:21] |    inst[20] |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+
S-immediate |                                              inst[31] | inst[30:25] |  inst[11:8] |     inst[7] |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+
B-immediate |                                inst[31] |     inst[7] | inst[30:25] |  inst[11:8] |           0 |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+
U-immediate |    inst[31] | inst[30:20] | inst[19:12] |                                                     0 |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+
J-immediate |                  inst[31] | inst[19:12] |    inst[20] | inst[30:25] | inst[24:21] |           0 |
            +-------------+-------------+-------------+-------------+-------------+-------------+-------------+



lui U-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[31:12]                   |rd   |01101|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = sext(immediate[31:12] << 12)


auipc U-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[31:12]                   |rd   |00101|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = pc + sext(immediate[31:12] << 12)


addi I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |000  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] + sext(immediate)


slti I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |010  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] <s sext(immediate)


sltiu I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |011  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] <u sext(immediate)


xori I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |100  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] ^ sext(immediate)


ori I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |110  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] | sext(immediate)


andi I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |imm[11:0]        |rs1  |111  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] & sext(immediate)


slli I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|0X   |shamt|rs1  |001  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] << shamt


srli I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|0X   |shamt|rs1  |101  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] >>u shamt


srai I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |01000|0X   |shamt|rs1  |101  |rd   |00100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] >>s shamt


add R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |000  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] + x[rs2]


sub R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |01000|00   |rs2  |rs1  |000  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] - x[rs2]


sll R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |001  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] << x[rs2]


slt R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |010  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] <s x[rs2]


sltu R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |011  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] <u x[rs2]


xor R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |100  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] ^ x[rs2]


srl R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |101  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] >>u x[rs2]


sra R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |01000|00   |rs2  |rs1  |101  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] >>s x[rs2]


or R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |110  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] | x[rs2]


and R-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |rs2  |rs1  |111  |rd   |01100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = x[rs1] & x[rs2]


fence

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-28|27-24|23-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |0000 |pred |succ |00000|000  |00000|00011|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | Fence(pred, succ)


fence.i

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |00000|00000|001  |00000|00011|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | Fence(Store, Fetch)


csrrw

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |rs1  |001  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t = CSRs[csr]; CSRs[csr] = x[rs1]; x[rd] = t


csrrs

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |rs1  |010  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t = CSRs[csr]; CSRs[csr] = t | x[rs1]; x[rd] = t


csrrc

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |rs1  |011  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t = CSRs[csr]; CSRs[csr] = t &∼x[rs1]; x[rd] = t


csrrwi

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |uimm |101  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = CSRs[csr]; CSRs[csr] = zimm


csrrsi

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |uimm |110  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t = CSRs[csr]; CSRs[csr] = t | zimm; x[rd] = t


csrrci

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |csr              |rs1  |111  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t = CSRs[csr]; CSRs[csr] = t &∼zimm; x[rd] = t


ecall

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |00000|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | RaiseException(EnvironmentCall)


ebreak

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |00001|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | RaiseException(Breakpoint)


uret

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00000|00   |00010|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | ExceptionReturn(User)


sret

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00010|00   |00010|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | ExceptionReturn(User)


mret

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00110|00   |00010|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | ExceptionReturn(Machine)


wfi

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00010|00   |00101|00000|000  |00000|11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | while (noInterruptsPending) idle


sfence.vma

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |00010|01   |rs2  |rs1  |000  |rd   |11100|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | Fence(Store, AddressTranslation)


lb I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |000  |rd   |00000|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = sext(M[x[rs1] + sext(offset)][7:0])


lh I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |001  |rd   |00000|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = sext(M[x[rs1] + sext(offset)][15:0])


lw I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |010  |rd   |00000|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = sext(M[x[rs1] + sext(offset)][31:0])


lbu I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |100  |rd   |00000|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = M[x[rs1] + sext(offset)][7:0]


lhu I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |101  |rd   |00000|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = M[x[rs1] + sext(offset)][15:0]


sb S-type

  +-----+------+-----+-----+-----+-----------+-----+---+
  |31-27|26-25 |24-20|19-15|14-12|11-7       |6-2  |1-0|
  +-----+------+-----+-----+-----+-----------+-----+---+
  |offset[11:5]|rs2  |rs1  |000  |offset[4:0]|01000|11 |
  +-----+------+-----+-----+-----+-----------+-----+---+

  | M[x[rs1] + sext(offset)] = x[rs2][7:0]


sh S-type

  +-----+------+-----+-----+-----+-----------+-----+---+
  |31-27|26-25 |24-20|19-15|14-12|11-7       |6-2  |1-0|
  +-----+------+-----+-----+-----+-----------+-----+---+
  |offset[11:5]|rs2  |rs1  |001  |offset[4:0]|01000|11 |
  +-----+------+-----+-----+-----+-----------+-----+---+

  | M[x[rs1] + sext(offset)] = x[rs2][15:0]


sw S-type

  +-----+------+-----+-----+-----+-----------+-----+---+
  |31-27|26-25 |24-20|19-15|14-12|11-7       |6-2  |1-0|
  +-----+------+-----+-----+-----+-----------+-----+---+
  |offset[11:5]|rs2  |rs1  |010  |offset[4:0]|01000|11 |
  +-----+------+-----+-----+-----+-----------+-----+---+

  | M[x[rs1] + sext(offset)] = x[rs2][31:0]


jal J-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[20|10:1|11|19:12]     |rd   |11011|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | x[rd] = pc+4; pc += sext(offset)


jalr I-type

  +-----+-----+-----+-----+-----+-----+-----+---+
  |31-27|26-25|24-20|19-15|14-12|11-7 |6-2  |1-0|
  +-----+-----+-----+-----+-----+-----+-----+---+
  |offset[11:0]     |rs1  |000  |rd   |11001|11 |
  +-----+-----+-----+-----+-----+-----+-----+---+

  | t =pc+4; pc=(x[rs1]+sext(offset))&∼1; x[rd]=t


beq B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |000  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] == x[rs2]) pc += sext(offset)


bne B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |001  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] != x[rs2]) pc += sext(offset)


blt B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |100  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] <s x[rs2]) pc += sext(offset)


bge B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |101  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] >=s x[rs2]) pc += sext(offset)


bltu B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |110  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] <u x[rs2]) pc += sext(offset)


bgeu B-type

  +-----+---------+-----+-----+-----+--------------+-----+---+
  |31-27|26-25    |24-20|19-15|14-12|11-7          |6-2  |1-0|
  +-----+---------+-----+-----+-----+--------------+-----+---+
  |offset[12|10:5]|rs2  |rs1  |111  |offset[4:1|11]|11000|11 |
  +-----+---------+-----+-----+-----+--------------+-----+---+

  | if (x[rs1] >=u x[rs2]) pc += sext(offset)